(()=>{"use strict";const e=class{static selector(){return"[data-skip-link]"}constructor(e){this.skipLink=e,this.main=document.querySelector("main"),this.skipLink&&this.main&&this.skipLink.addEventListener("click",(()=>this.handleClick()))}handleClick(){this.main.setAttribute("tabindex",-1),this.main.addEventListener("blur",(()=>this.handleBlur())),this.main.addEventListener("focusout",(()=>this.handleBlur())),this.main.focus()}handleBlur(){this.main.removeAttribute("tabindex"),this.main.removeEventListener("blur",this.handleBlur),this.main.removeEventListener("focusout",this.handleBlur)}};!function(){const e=document.querySelectorAll("[data-form]"),t=document.querySelectorAll("[data-save]"),a=document.querySelector("[data-cancel]"),n=document.querySelectorAll("[data-edit]"),o=document.getElementById("clear"),r=document.querySelector("[data-name-heading]"),c=document.querySelector("[data-status-container"),i=document.querySelector("[data-mode]").getAttribute("data-mode"),l=[],d="NSHCS-TMS-store",s=JSON.parse(localStorage.getItem(d))||[];class u{constructor(e,t,a,n,o,r,c){this.id=e,this.dataName=t,this.status=a,this.preferred=n,this.type=o,this.value=r,this.checked=c}}function m(){s&&s.forEach((e=>{if(e.status&&e.checked){const t=document.createElement("div");t.textContent=e.value,t.classList.add("tag","tag--green"),c.appendChild(t)}const t=document.querySelector(`[data-form='${e.dataName}']`);t&&("name"===e.dataName&&(r.textContent=e.value,t.checked=e.checked),"edit"===i?(t.value=e.value,"radio"!==e.type&&"checkbox"!==e.type||e.checked&&(t.checked=!0)):(t.textContent=e.value,"email"===e.type&&e.value&&(t.innerHTML=`<a href=mailto:${e.value}>${e.value}</a>`),"checkbox"===e.type&&(t.textContent=e.checked?"Yes":"No"),"radio"===e.type&&(t.textContent="",e.checked&&(e.preferred?t.innerHTML='<div\n                                            class="tag tag--light-blue tag--width-auto"\n                                        >Preferred</div>':t.textContent=e.value))))})),"view"===i&&(document.querySelectorAll("[data-date]").forEach((e=>{const t=3===e.childElementCount?"full":"reduced",a=e.textContent.replace(/\s+/g,"-").replace(/(^\-+|\-+$)/gm,"");e.innerHTML=new Date(a).toLocaleDateString("en-GB","full"===t?{year:"numeric",month:"long",day:"numeric"}:{year:"numeric",month:"long"}),"Invalid Date"===e.innerHTML&&e.parentNode.remove()})),document.querySelectorAll("[data-form]").forEach((e=>{"true"===e.getAttribute("data-no-hide")||0===e.textContent.length&&e.parentNode.remove()})))}t&&t.forEach((t=>{t.addEventListener("click",(()=>{var t;t=!0,localStorage.setItem(d,JSON.stringify((e.forEach(((e,t)=>{const a=document.querySelector(`[data-form='${e.dataset.form}']`),n=new u(t,a.dataset.form,a.dataset.status,a.dataset.preferred,a.type,a.value,a.checked);l.push(n)})),l))),t&&window.location.replace(window.location.pathname.replace(/\/[^\/]*$/,"/view.html"))}))})),n&&n.forEach((e=>{e.addEventListener("click",(()=>{window.location.replace(window.location.pathname.replace(/\/[^\/]*$/,"/index.html"))}))})),a&&a.addEventListener("click",(()=>{m(),window.location.replace(window.location.pathname.replace(/\/[^\/]*$/,"/view.html"))})),o&&o.addEventListener("click",(()=>{localStorage.removeItem(d),window.location.replace(window.location.pathname.replace(/\/[^\/]*$/,"/index.html"))})),document.addEventListener("DOMContentLoaded",(()=>{m()}))}(),window.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=Array.prototype.forEach),Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(e){let t=this;do{if(t.matches(e))return t;t=t.parentElement||t.parentNode}while(null!==t&&1===t.nodeType);return null}),document.addEventListener("DOMContentLoaded",(()=>{var t;t=e,document.querySelectorAll(t.selector()).forEach((e=>new t(e)))}))})();